<div class="row template">
    <div class="row ml-3 col-12" style="background: #ffffff;
padding: 10px 10px 10px 10px !important;
    font-size: 20px !important;
    color: #222b45; width:97%;">
      <div class="row col-12">
        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 text-align-left mt-3">
          <span>De</span>
          <input type="date" placeholder="Date" class="form-control p-field"
                 [(ngModel)]="dates.beginDate"
                 [max]="maxbeginDate"
                 style="font-size: 13px" >
        </div>
        <div class="col-xl-4 col-lg-4 col-4-md-4 col-sm-4 text-align-left mt-3">
          <span>A</span>
          <input type="date" placeholder="Date" class="form-control p-field"
                 [(ngModel)]="dates.endDate"
                 [min]="minEndDate"
                 [max]="maxEndDate"
                 style="font-size: 13px" >
        </div>
      </div>
      <div class="row col-12">
      <div class="col-xl-4 col-lg-4 col-4-md-4 col-sm-4 text-align-left mt-3">
        <span>Customers</span>
        <span class="p-fluid">
            <p-autoComplete [inputStyle]="{'color':'black'}" [(ngModel)]="selectedCustomers" [suggestions]="filteredCustomers"  (completeMethod)="filterCustomer($event)" field="customerLabel" [multiple]="true">
            </p-autoComplete>
        </span>
      </div>
      <div class="col-xl-4 col-lg-4 col-4-md-4 col-sm-4 text-align-left mt-3">
        <span>Products</span>
        <span class="p-fluid">
            <p-autoComplete [inputStyle]="{'color':'black'}" [(ngModel)]="selectedProducts" [suggestions]="filteredProducts"  (completeMethod)="filterProduct($event)" field="productLabel" [multiple]="true">
            </p-autoComplete>
        </span>
      </div>
      </div>
      <div class="row col-12">
      <div class="col-xl-4 col-lg-4 col-4-md-4 col-sm-4 text-align-right" >
        <br>
      <button
      pButton
      pRipple
      class="btn primaryBtn mr-2"
      label="Télécharger PDF"
      icon="pi pi-file-pdf" (click)="generatePDF()"
    ></button>
        <button
          pButton
          pRipple
          class="btn primaryBtn"
          label="Filter"
          icon="pi pi-file-pdf" (click)="filter()"
        ></button>
      </div>
    </div>
    </div>
  <div
    id="chiffreAffaire"
    class="col-md-12"
    style="height: 11.6929in; width: 8.2677in; margin-top: 10px"
  >
    <nb-card style="width: 100%; height: 100%">
      <nb-card-body>
        <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
        </div>
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
            <span style="font-style: italic;    font-weight: 700;
            font-size: 27px;
            line-height: normal;">Liste des documents des ventes</span>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
            <span style="font-style: italic;    font-weight: 700;
            font-size: 20px;
            line-height: normal;">Societé: {{company.campanyName}}</span>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-8 col-lg-8 col-md-8 col-sm-8">
          </div>
          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">
            <span>Date de tirage {{currentDate}} à {{currentTime}}</span>
          </div>
        </div>
      <table
        class="table col-xl-12 col-lg-12 col-md-12 col-sm-12 mt-3"
      >


        <th style="width: 13%">N° Client</th>
        <th style="width: 15%">Intitulé</th>
        <th style="width: 10%">Date</th>
        <th style="width: 14%">N° Pièce</th>
        <th style="width: 12%">Total HT</th>
        <th style="width: 12%">Total TTC</th>
        <th style="width: 12%">Net à payer</th>
        <th style="width: 12%;border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;">Echéance</th>
        <tr *ngFor="let facture of chiffreAffaire.factures">
          <td class="text-left" style="width: 13%">
          </td>
          <td *ngIf="withProduct" class="text-left" style="width: 15%">
            {{facture.facture.customer.customerLabel}}
          </td>
          <td *ngIf="!withProduct" class="text-left" style="width: 15%">
            {{facture.customer.customerLabel}}
          </td>
          <td *ngIf="!withProduct" class="text-left" style="width: 10%">
            {{facture.factureDeadlineDate}}
          </td>
          <td *ngIf="withProduct" class="text-left" style="width: 10%">
            {{facture.facture.factureDeadlineDate}}
          </td>
          <td *ngIf="!withProduct" class="text-left" style="width: 14%">
            {{facture.factureNumber}}
          </td>
          <td *ngIf="withProduct" class="text-left" style="width: 14%">
            {{facture.facture.factureNumber}}
          </td>
          <td *ngIf="withProduct" class="text-right" style="width: 12%">
            {{facture.factureLine.montantHtS}}
          </td>
          <td *ngIf="!withProduct" class="text-right" style="width: 12%">
            {{facture.totalHTS}}
          </td>
          <td *ngIf="withProduct" class="text-right" style="width: 12%">
            {{facture.factureLine.montantHtBrutS}}
          </td>
          <td *ngIf="!withProduct" class="text-right" style="width: 12%">
            {{facture.totalTTCS}}
          </td>
          <td *ngIf="withProduct" class="text-right" style="width: 12%">
            {{facture.factureLine.montantHtS}}
          </td>
          <td *ngIf="!withProduct" class="text-right" style="width: 12%">
            {{facture.totalHTS}}
          </td>
          <td *ngIf="!withProduct" class="text-left" style="width: 10%">
            {{facture.factureDeadlineDate}}
          </td>
          <td *ngIf="withProduct" class="text-left" style="width: 10%">
            {{facture.facture.factureDeadlineDate}}
          </td>
        </tr>

        <tr >
          <td class="text-left" style="width: 13%;background: white;border-top-left-radius: 0px;
                  border-bottom-left-radius: 0px;">
          </td>
          <td class="text-left" style="width: 15%;background: white">
          </td>
          <td class="text-right" style="width: 10%;background: white">

          </td>
          <td class="text-right" style="width: 14%;border-top-left-radius: 10px;
                  border-bottom-left-radius: 10px;">
            TOTAL GENERAL
          </td>
          <td class="text-right" style="width: 12%">
            {{chiffreAffaire.sommeHt}}
          </td>
          <td class="text-right" style="width: 12%">
            {{chiffreAffaire.sommeTTC}}
          </td>
          <td class="text-right" style="width: 12%;border-top-right-radius: 10px;
                  border-bottom-right-radius: 10px;">
            {{chiffreAffaire.sommeHt}}
          </td>
          <td class="text-right" style="width: 12%;background: white;border-top-right-radius: 0px;
                  border-bottom-right-radius: 0px;">
          </td>
        </tr>

      </table>
      </nb-card-body>

      <nb-card-footer>
        <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">
          </div>
        </div>
      </nb-card-footer>
    </nb-card>
  </div>
</div>
