<div class="card" *ngIf="!showProviderWindow">
  <p-table #dt [value]="providers" dataKey="id" styleClass="p-datatable-customers" [rowHover]="true"
           [rows]="5" [showCurrentPageReport]="true" [rowsPerPageOptions]="[5,10,15]" [loading]="loading"
           [paginator]="true" currentPageReportTemplate=""
           [filterDelay]="0" [globalFilterFields]="['providerLabel','providerUniqueIdentifier','providerAddress','providerTel','providerEmail','providerManagerName','createdAt', 'updatedAt']">
    <ng-template pTemplate="caption" >
      <div style="display: flex; width: 100%">
        <div class="p-d-flex p-ai-center p-jc-between" style="width: 60%">
        <span class="p-input-icon-left" style="width: 100%">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" style="margin-left: 5%; width: 93%;" class="searchInput, p-inputtext"(input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Chercher un fournisseur.." />
                </span>
        </div>

        <div style="width:23%; margin-left: 25%">
          <button pButton pRipple label="Nouveau fournisseur" icon="pi pi-plus" class="p-button-success p-mr-2" (click)="showProviderWindow=true"></button>
        </div>

      </div>

    </ng-template>
    <ng-template pTemplate="header">
      <tr style="text-align: center; font-size: 15px;">
        <th pSortableColumn="providerLabel" style="text-align: center; font-size: 15px;">Dénomination<p-sortIcon field="providerLabel"></p-sortIcon></th>
        <th pSortableColumn="providerUniqueIdentifier" style="text-align: center; font-size: 15px;">Identifiant<p-sortIcon field="providerUniqueIdentifier"></p-sortIcon></th>
        <th pSortableColumn="providerAddress" style="width: 300px; text-align: center;font-size: 15px;">Adresse<p-sortIcon field="providerAddress"></p-sortIcon></th>
        <!--
		<th pSortableColumn="customerTel" style="text-align: center; font-size: 15px;">Télephone</th>
		<th pSortableColumn="customerEmail" style="text-align: center; font-size: 15px;">Email</th>
		!-->

        <th pSortableColumn="providerManagerName"  style="text-align: center; font-size: 15px;">Nom du responsable</th>
        <!--
          <th pSortableColumn="createdAt">Date de création</th>
          <th pSortableColumn="updatedAt">Date de modfication</th>
          -->
        <th style="width: 10rem"></th>
      </tr>
      <!--
      <tr>
        <th>
          <input pInputText type="text" (input)="dt.filter($event.target.value, 'customerLabel', 'contains')" placeholder="Chercher par nom" class="p-column-filter">
        </th>
        <th>
          <input pInputText type="text" (input)="dt.filter($event.target.value, 'customerUniqueIdentifier', 'contains')" placeholder="Chercher par identifiant" class="p-column-filter">
        </th>
        <th>
          <input pInputText type="text" (input)="dt.filter($event.target.value, 'customerAddress', 'contains')" placeholder="Chercher par adresse" class="p-column-filter">
        </th>
        <th>
          <input pInputText type="text" (input)="dt.filter($event.target.value, 'customerTel', 'contains')" placeholder="Chercher par télephone" class="p-column-filter">
        </th>
        <th>
          <input pInputText type="text" (input)="dt.filter($event.target.value, 'customerEmail', 'contains')" placeholder="Chercher par email" class="p-column-filter">
        </th>
      </tr>
      -->
    </ng-template>
    <ng-template pTemplate="body" let-provider>
      <tr class="p-selectable-row" style="text-align: center; font-size: 13px;">
        <td  style="text-align: center;">
          {{provider.providerLabel}}
        </td>
        <td style="text-align: center;">
          {{provider.providerUniqueIdentifier}}
        </td>
        <td style="text-align: center;">
          {{provider.providerAddress}}
        </td>
        <!--
        <td style="text-align: center;">
          {{client.customerTel}}
        </td>
        <td style="text-align: center;">
          {{client.customerEmail}}
        </td>
        -->

        <td style="text-align: center;">
          {{provider.providerManagerName}}
        </td>

        <td style="text-align: center;">
          <div style="display: flex;">
            <button pButton   placement="top" ngbTooltip="Contacter" pRipple icon="pi pi-users" class="p-button-rounded p-button-info p-mr-2" style="margin-right: 7px;" (click)="showContacts(provider)"></button>
            <button pButton   placement="top" ngbTooltip="Modifier" pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success p-mr-2" style="margin-right: 7px;" (click)="1"></button>
            <button pButton   placement="top" ngbTooltip="Supprimer" pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger" (click)="1"></button>
          </div>

        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="8">Aucun fournisseur trouvé!</td>
      </tr>
    </ng-template>
  </p-table>
</div>

<ngx-add-new-provider *ngIf="showProviderWindow" [provider]="provider" (addNewProviderEvent)="saveNewProvider($event)" (cancelEvent)="hideProviderWindow(); initprovider();"></ngx-add-new-provider>
